<div class="container mx-auto px-4">
    <div class="flex justify-between items-center mb-12">
        <h2 class="text-3xl font-bold font-display">Похожие отели</h2>
        <a href="#" class="text-primary font-medium hover:text-accent transition flex items-center">
            Все отели <i class="fas fa-arrow-right ml-2 text-sm"></i>
        </a>
    </div>
    
    <div id="hotel-list" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">

        <script>
            // hotels constant is now move to data/hotels.json
            // Use data/hotels.json for data

            async function renderHotels() {
                const container = document.getElementById('hotel-list');
                const templateResponse = await fetch('/templates/hotel-card.html');
                let template = await templateResponse.text();

                const dataResponse = await fetch('/data/hotels.json');
                const hotels = await dataResponse.json();

                hotels.slice(0, 3).forEach(hotel => {
                    // Подставляем статичные поля
                    let hotelHTML = template
                        .replace(/{{name}}/g, hotel.name)
                        .replace(/{{slug}}/g, hotel.slug)
                        .replace(/{{address}}/g, hotel.address.street)
                        .replace(/{{fromCenter}}/g, hotel.fromCenter)
                        .replace(/{{ratingScore}}/g, hotel.rating)
                        .replace(/{{ratingText}}/g, hotel.ratingText || "")
                        .replace(/{{priceFrom}}/g, `от ${hotel.pricePerNight.min}`)
                        .replace(/{{featured}}/g, hotel.featured)
                        .replace(/{{distance}}/g, hotel.distance || "")
                        .replace(/{{reviews}}/g, hotel.reviews || "0")
                        .replace(/{{stars}}/g, "★".repeat(hotel.stars || 0))

                    // Динамическая вставка отзывов (если в шаблоне есть {{reviews}})
                    hotelHTML = hotelHTML.replace(/{{reviews}}/g, hotel.reviews || "0");

                    // Вставка features (если в шаблоне нет шаблона для фич — вставляем вручную)
                    const amenitiesHTML = hotel.amenities.map(f =>
                        `<span class="bg-gray-100 text-gray-700 px-3 py-1 rounded-full text-sm">${f}</span>`
                    ).join('');

                    hotelHTML = hotelHTML.replace('{{features}}', amenitiesHTML);


                    // Вместо вставки прямо в шаблон, можно например в placeholder {{features}} или добавлять в готовый html
                    hotelHTML = hotelHTML.replace('{{mapEmbed}}', hotel.mapEmbed || '');


                    container.insertAdjacentHTML('beforeend', hotelHTML);
                });
            }

            renderHotels();

        </script>
        
    </div>
</div>
